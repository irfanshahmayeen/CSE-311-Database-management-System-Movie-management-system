<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Movie</title>
    <link rel="stylesheet" href="theaterAdminUpdate.css">
</head>
<body>
    <h1>Edit Movie</h1>
    <form action="theaterAdminUpdate.php" method="post">
        <?php
        include '../../connection.php';

        // Retrieve MovieID from URL parameter
        if(isset($_GET['id'])){
            $movieID = $_GET['id'];

            // Fetch movie details from the database
            $query = "SELECT * FROM theatermovie WHERE MovieID = $movieID";
            $result = mysqli_query($conn, $query);

            if(mysqli_num_rows($result) > 0) {
                $row = mysqli_fetch_assoc($result);

                // Display fields for editing movie information
                echo "<input type='hidden' name='movieID' value='$movieID'>";

                echo "<label for='title'>Title:</label><br>";
                echo "<input type='text' id='title' name='title' value='" . $row['Title'] . "' required><br><br>";

                echo "<label for='category'>Category:</label><br>";
                echo "<input type='text' id='category' name='category' value='" . $row['Category'] . "' required><br><br>";

                echo "<label for='startTime'>Start Time:</label><br>";
                echo "<input type='time' id='startTime' name='startTime' value='" . $row['StartTime'] . "' required><br><br>";

                echo "<label for='endTime'>End Time:</label><br>";
                echo "<input type='time' id='endTime' name='endTime' value='" . $row['EndTime'] . "' required><br><br>";

                echo "<label for='location'>Location:</label><br>";
                echo "<select id='location' name='location[]' multiple required>";
                echo "<option value='Bashundhara city' " . (($row['Location'] == 'Bashundhara city') ? 'selected' : '') . ">Bashundhara City</option>";
                echo "<option value='Jamuna Future Park' " . (($row['Location'] == 'Jamuna Future Park') ? 'selected' : '') . ">Jamuna Future Park</option>";
                echo "<option value='Simanto square' " . (($row['Location'] == 'Simanto square') ? 'selected' : '') . ">Simanto Square</option>";
                echo "<option value='North South University' " . (($row['Location'] == 'North South University') ? 'selected' : '') . ">North South University</option>";
                echo "<option value='Mirpur' " . (($row['Location'] == 'Mirpur') ? 'selected' : '') . ">Mirpur</option>";
                echo "</select><br><br>";

                echo "<label for='ticketPrice'>Ticket Price:</label><br>";
                echo "<input type='number' id='ticketPrice' name='ticketPrice' value='" . $row['TicketPrice'] . "' required><br><br>";

                echo "<input type='submit' name='submit' value='Update'>";
            } else {
                echo "No movie found with the given ID.";
            }
        } else {
            echo "No ID provided.";
        }
        ?>
        <a href="theaterAdminUpdate.php">Cancel</a>
    </form>
</body>
</html>
